
/** @license React SidePane v2.4.0
 * react-side-pane.es.js
 *
 * Copyright (c) Romain Coudour
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
import e from"@babel/runtime/helpers/slicedToArray";import t,{useRef as n,useState as r,useMemo as o,useEffect as a,useCallback as i}from"react";import c from"react-focus-lock";import{disableBodyScroll as d,enableBodyScroll as s}from"body-scroll-lock";import{createPortal as l}from"react-dom";import u from"prop-types";import p from"@babel/runtime/helpers/defineProperty";import{Transition as f}from"react-transition-group";function b(e,t,n,r){var o=0;return o=t&&(t>=e||e-t<n)?"right"===r?t+n:t-n:e,Math.min(o,100)}function m(e){return{WebkitTransition:"opacity ".concat(e,"ms ease-out"),OTransition:"opacity ".concat(e,"ms ease-out"),transition:"opacity ".concat(e,"ms ease-out")}}function y(e){return{WebkitTransition:"-webkit-transform ".concat(e,"ms ease-out"),OTransition:"transform ".concat(e,"ms ease-out"),transition:"transform ".concat(e,"ms ease-out, -webkit-transform ").concat(e,"ms ease-out")}}var h="SidePane_sidePane__2RWR-",v="SidePane_sidePane__backdrop__7KcYU",_="SidePane_sidePane__pane__9tRBZ";function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".SidePane_sidePane__2RWR-{bottom:0;height:100%;left:0;outline:none;position:fixed;right:0;top:0;width:100%;z-index:1000}.SidePane_sidePane__2RWR-:not([open]){display:none}.SidePane_sidePane__backdrop__7KcYU{-webkit-box-pack:end;-ms-flex-pack:end;background-color:rgba(0,0,0,.2);cursor:pointer;display:flex;flex-direction:row;height:inherit;pointer-events:auto;transition:opacity .25s ease-out;width:inherit;will-change:opacity}.SidePane_sidePane__backdrop__7KcYU[data-position=left]{justify-content:flex-start}.SidePane_sidePane__backdrop__7KcYU[data-position=right]{justify-content:flex-end}.SidePane_sidePane__backdrop__7KcYU[data-hide-backdrop=true]{background-color:transparent}.SidePane_sidePane__backdrop__7KcYU[data-disable-backdrop=true]{cursor:default}.SidePane_sidePane__pane__9tRBZ{background-color:#fff;box-shadow:0 0 20px rgba(0,0,0,.5);cursor:default;height:100%;max-height:100%;max-width:100%;overflow:hidden;pointer-events:auto;transition:transform .25s ease-out;will-change:transform}@media (prefers-reduced-motion:reduce){.SidePane_sidePane__backdrop__7KcYU,.SidePane_sidePane__pane__9tRBZ{transition:none}}");var P={transform:"translateX(100%)"},O=t.forwardRef((function(e,n){var r=e.ariaLabel,o=e.ariaLabelledby,a=e.ariaDescribedBy,i=e.autoWidth,c=e.children,d=e.className,s=e.duration,l=e.onEnter,u=e.onEntered,p=e.onExited,b=e.onExiting,m=e.open,h=e.position,v=e.style,g=e.translateValue,O=e.width,w=k(k({},function(e){return"right"===e?{entering:{transform:"translateX(100%)"},entered:{transform:"translateX(0%)"},exiting:{transform:"translateX(100%)"},exited:{transform:"translateX(100%)"}}:{entering:{transform:"translateX(-100%)"},entered:{transform:"translateX(0%)"},exiting:{transform:"translateX(-100%)"},exited:{transform:"translateX(-100%)"}}}(h)),{},{entered:{transform:"translateX(100%) translateX(-".concat(g,"vw)")}});return t.createElement(f,{mountOnEnter:!0,in:m,timeout:{appear:0,enter:0,exit:s},onEnter:l,onEntered:u,onExited:p,onExiting:b},(function(e){return t.createElement("div",{ref:n,"aria-describedby":a||null,"aria-label":r||"side pane","aria-labelledby":o||null,"aria-modal":"true",className:"".concat(_," ").concat(d),role:"dialog",style:k(k(k(k(k({},P),w[e]),y(s)),v),{},{width:i?"auto":"".concat(Math.min(O,100),"%")})},c)}))}));function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var r=e.children,o=e.className,a=e.disableBackdropClick,i=e.duration,c=e.hideBackdrop,d=e.onClose,s=e.position,l=e.style,u=n(null);return t.createElement("div",{ref:u,"aria-label":"backdrop","data-position":s,className:"".concat(v," ").concat(o),"data-disable-backdrop":a,"data-hide-backdrop":c,role:"presentation",style:E(E({},m(i)),l),onClick:function(e){var t=e.target,n=u.current;a||t!==n||d()}},r)}var j=function(e,t){var n=document.getElementById(e);n&&n.getAttribute("aria-hidden")!==t&&n.setAttribute("aria-hidden",t)};function S(u){var p=u.appNodeId,f=void 0===p?"root":p,m=u["aria-describedby"],y=void 0===m?"":m,v=u["aria-label"],_=void 0===v?"side pane":v,g=u["aria-labelledby"],k=void 0===g?"":g,P=u.autoWidth,w=void 0!==P&&P,E=u.backdropClassName,S=void 0===E?"":E,B=u.backdropStyle,C=void 0===B?{}:B,N=u.children,R=u.className,D=void 0===R?"":R,X=u.containerId,T=void 0===X?"":X,W=u.disableBackdropClick,A=void 0!==W&&W,K=u.disableEscapeKeyDown,I=void 0!==K&&K,L=u.disableRestoreFocus,U=void 0!==L&&L,Y=u.duration,F=void 0===Y?250:Y,q=u.hideBackdrop,V=void 0!==q&&q,Z=u.offset,M=void 0===Z?10:Z,z=u.onActive,G=void 0===z?null:z,H=u.onClose,J=u.open,Q=void 0!==J&&J,$=u.position,ee=void 0===$?"right":$,te=u.style,ne=void 0===te?{}:te,re=u.width,oe=void 0===re?0:re,ae=n(null),ie=n(null),ce=n(null),de=n(oe),se=n(b(de.current,0,M,ee)),le=r(!1),ue=e(le,2),pe=ue[0],fe=ue[1],be=o((function(){return T?document.getElementById(T):document.body}),[T]);a((function(){var e=ae.current,t=function(e){var t=e.code,n=e.key,r=e.keyCode,o=t||n||r;["Escape","Esc",27].some((function(e){return e===o}))&&"function"==typeof H&&H()};return!I&&pe&&(null==e||e.addEventListener("keydown",t)),function(){null==e||e.removeEventListener("keydown",t)}}),[pe,I,H]),a((function(){var e=ae.current;Q||pe?d(e):s(e)}),[Q,pe]);var me,ye=i((function(e){se.current=e,ie.current.style.transform="translateX(+100%) translateX(-".concat(e,"vw)"),"function"==typeof G&&G(e)}),[G]),he=i((function(e){var t;j(f,"true"),null===(t=ae.current)||void 0===t||t.setAttribute("aria-hidden",(!!e).toString()),ye(b(de.current,e,M,ee))}),[f,M,ye]),ve=Q||pe,_e=(me={onActive:he},w&&(me.ref=ce),me);return l(t.createElement(c,{autoFocus:!0,disabled:!ve,returnFocus:!U,shards:[ae.current],whiteList:function(e){return be.contains(e)}},t.createElement("div",{ref:ae,className:h,open:ve,tabIndex:-1},t.createElement(x,{className:S||"",disableBackdropClick:A,duration:F,hideBackdrop:V,position:ee,style:C||{},onClose:H},t.createElement(O,{ref:ie,ariaDescribedBy:y,ariaLabel:_,ariaLabelledby:k,autoWidth:w,className:D||"",duration:F,open:Q,style:ne||{},translateValue:se.current,width:oe,position:ee,onEnter:function(){j(f,"true"),ae.current.focus(),fe(!0)},onEntered:function(){if(w){var e=(ce.current?ce.current.getBoundingClientRect().width:0)/document.body.clientWidth*100;de.current=e}else de.current=oe;ye(b(de.current,0,M,ee))},onExited:function(){return fe(!1)},onExiting:function(){"function"==typeof G?G(0):j(f,"false")}},pe&&("function"==typeof N?N({onActive:he}):t.cloneElement(t.Children.only(N),_e)))))),be)}S.propTypes="production"!==process.env.NODE_ENV?{appNodeId:u.string,"aria-describedby":u.string,"aria-label":u.string,"aria-labelledby":u.string,autoWidth:u.bool,backdropClassName:u.string,backdropStyle:u.object,children:u.oneOfType([u.func,u.element]).isRequired,className:u.string,containerId:u.string,disableBackdropClick:u.bool,disableEscapeKeyDown:u.bool,disableRestoreFocus:u.bool,duration:u.number,hideBackdrop:u.bool,offset:u.number,onActive:u.func,onClose:u.func.isRequired,open:u.bool.isRequired,position:u.string,style:u.object,width:u.number}:{};export{S as SidePane};
